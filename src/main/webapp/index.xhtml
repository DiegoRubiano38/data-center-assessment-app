<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
<h:head>
    <title>Venta de Recargas en Línea</title>
</h:head>
<h:body>
    <h:form>
        <h:panelGrid columns="2">
            <h:outputLabel for="operator" value="Operador:" />
            <h:inputText id="operator" value="#{rechargeBean.operator}" />

            <h:outputLabel for="value" value="Valor de Recarga:" />
            <h:inputText id="value" value="#{rechargeBean.value}" />

            <h:outputLabel for="seller" value="Vendedor:" />
            <h:inputText id="seller" value="#{rechargeBean.seller}" />

            <h:outputLabel for="cellphoneNumber" value="Número de Celular:" />
            <h:inputText id="cellphoneNumber" value="#{rechargeBean.cellphoneNumber}" />

            <h:commandButton value="Realizar Recarga" action="#{rechargeBean.doRecharge}" />
            <h:commandButton value="Consultar Recargas" action="#{rechargeBean.getAllRecharges}" />
        </h:panelGrid>

        <p:outputPanel id="panelToUpdate" layout="block">
            <p:selectOneMenu value="#{rechargeBean.operatorFilter}">
                <f:selectItem itemLabel="-- Seleccionar Operador --" itemValue="" />
                <f:selectItems value="#{rechargeBean.operatorList}" />
                <p:ajax update="panelToUpdate" listener="#{rechargeBean.selectedOperatorFilter}" />
            </p:selectOneMenu>

            <br/>

            <h:outputLabel value="Número de Recargas Hechas: " />
            <h:outputText value="#{rechargeBean.rechargeCount}" />

            <br/>

            <h:outputLabel value="Valor Total de Recargas: " />
            <h:outputText value="#{rechargeBean.totalRecharges}" />
        </p:outputPanel>

    </h:form>

    <h:panelGrid columns="4">
        <h:outputText value="Recargas Realizadas:" />
        <p:dataTable var="recharge" value="#{rechargeBean.recharges}">
            <p:column headerText="Operador">
                <h:outputText value="#{recharge.operator}" />
            </p:column>
            <p:column headerText="Valor">
                <h:outputText value="#{recharge.value}" />
            </p:column>
            <p:column headerText="Vendedor">
                <h:outputText value="#{recharge.seller}" />
            </p:column>
            <p:column headerText="Número de Celular">
                <h:outputText value="#{recharge.cellphoneNumber}" />
            </p:column>
        </p:dataTable>
    </h:panelGrid>
</h:body>
</html>